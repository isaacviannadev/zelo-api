import{a as s}from"./chunk-SAYYBWUX.mjs";import{z as e}from"zod";async function l(i){i.withTypeProvider().get("/events/:eventId/attendees",{schema:{summary:"Get event attendees",tags:["Events"],params:e.object({eventId:e.string().uuid()}),querystring:e.object({query:e.string().nullish(),pageIndex:e.string().nullable().default("0").transform(Number)}),response:{200:e.object({attendees:e.array(e.object({id:e.number(),name:e.string(),email:e.string().email(),createdAt:e.date(),checkInAt:e.date().nullable()}))})}}},async(r,c)=>{let{eventId:a}=r.params,{query:n,pageIndex:d}=r.query,m=await s.attendee.findMany({select:{id:!0,name:!0,email:!0,createdAt:!0,checkIn:{select:{createdAt:!0}}},where:n?{eventId:a,OR:[{name:{contains:n}},{email:{contains:n}}]}:{eventId:a},take:10,skip:d*10,orderBy:{createdAt:"desc"}});return c.send({attendees:m.map(t=>({id:t.id,name:t.name,email:t.email,createdAt:t.createdAt,checkInAt:t.checkIn?.createdAt??null}))})})}export{l as a};
